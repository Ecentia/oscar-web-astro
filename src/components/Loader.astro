---
---
<div class="loader">
    <div class="loader-text">LOADING FREQUENCY <span id="counter">0</span>%</div>
</div>

<script>
    import { gsap } from "gsap";

    const counterElement = document.getElementById('counter');
    const loader = document.querySelector('.loader');
    let counter = 0;

    if (counterElement && loader) {
        const interval = setInterval(() => {
            counter += Math.floor(Math.random() * 5) + 1;
            
            if (counter > 100) {
                counter = 100;
                clearInterval(interval);
                
                // 1. AnimaciÃ³n de salida del loader
                gsap.to(loader, {
                    yPercent: -100,
                    duration: 1,
                    ease: "power4.inOut",
                    onComplete: () => {
                        // 2. DISPARAMOS EL EVENTO GLOBAL
                        window.dispatchEvent(new CustomEvent('loader-complete'));
                    }
                });
            }
            counterElement.innerText = counter.toString();
        }, 50);
    }
</script>

<style>
    .loader {
        position: fixed;
        top: 0; left: 0; width: 100%; height: 100%;
        background: #000;
        z-index: 9999;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 2rem;
        font-family: var(--font-display);
        color: #fff;
    }
</style>