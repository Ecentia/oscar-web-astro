---
---
<section class="kinetic-section">
    
    <!-- FONDO VISUAL CON COLOR -->
    <div class="background-container">
        <img src="/assets/foto_dj.jpg" alt="Rave Atmosphere" class="bg-image" />
        <div class="color-overlay"></div>
    </div>

    <div class="kinetic-wrapper">
        
        <!-- CINTA 1 -->
        <div class="tape-row" id="row-1">
            <div class="tape-track">
                <span class="word solid">HARD TECHNO</span>
                <span class="word outline">INDUSTRIAL</span>
                <span class="word solid">RAW ENERGY</span>
                <span class="word outline">UNDERGROUND</span>
                <span class="word solid">HARD TECHNO</span>
                <span class="word outline">INDUSTRIAL</span>
                <span class="word solid">RAW ENERGY</span>
                <span class="word outline">UNDERGROUND</span>
            </div>
        </div>

        <!-- CINTA 2 -->
        <div class="tape-row" id="row-2">
            <div class="tape-track">
                <span class="word outline">HYPNOTIC</span>
                <span class="word solid">RHYTHM</span>
                <span class="word outline">DARKNESS</span>
                <span class="word solid">EUPHORIA</span>
                <span class="word outline">HYPNOTIC</span>
                <span class="word solid">RHYTHM</span>
                <span class="word outline">DARKNESS</span>
                <span class="word solid">EUPHORIA</span>
            </div>
        </div>

    </div>
</section>

<script>
    import { gsap } from "gsap";
    import { ScrollTrigger } from "gsap/ScrollTrigger";

    gsap.registerPlugin(ScrollTrigger);

    const row1 = document.querySelector('#row-1 .tape-track');
    const row2 = document.querySelector('#row-2 .tape-track');
    const bgImage = document.querySelector('.bg-image');

    // Velocidad base
    let xPercent1 = 0;
    let xPercent2 = 0;
    let direction = 1;
    let velocity = 0;

    // Loop de movimiento infinito
    gsap.to({}, {
        duration: 0.1,
        repeat: -1,
        onRepeat: () => {
            const baseSpeed = 0.05; 
            const currentSpeed = baseSpeed + (velocity * 0.08); // Un poco más reactivo

            xPercent1 += currentSpeed * direction * -1;
            xPercent2 += currentSpeed * direction;

            if (xPercent1 <= -50) xPercent1 = 0;
            if (xPercent1 > 0) xPercent1 = -50;
            
            if (xPercent2 <= -50) xPercent2 = 0;
            if (xPercent2 > 0) xPercent2 = -50;

            gsap.set(row1, { xPercent: xPercent1 });
            gsap.set(row2, { xPercent: xPercent2 });
        }
    });

    ScrollTrigger.create({
        trigger: ".kinetic-section",
        start: "top bottom",
        end: "bottom top",
        onUpdate: (self) => {
            velocity = self.getVelocity() / 300;
            
            if(velocity > 5) velocity = 5;
            if(velocity < -5) velocity = -5;

            // Skew Effect
            gsap.to(".tape-track", {
                skewX: velocity * -3,
                duration: 0.5,
                ease: "power2.out",
                overwrite: "auto"
            });
            
            // Efecto Parallax en la imagen de fondo (Zoom + Movimiento)
            if(bgImage) {
                gsap.to(bgImage, {
                    scale: 1.1 + (Math.abs(velocity) * 0.02), // Zoom sutil con velocidad
                    y: velocity * 2,
                    duration: 0.5,
                    overwrite: "auto"
                });
            }
            
            gsap.to(".tape-track", {
                skewX: 0,
                duration: 0.5,
                delay: 0.1,
                ease: "power2.out",
                overwrite: "auto"
            });
        }
    });
</script>

<style>
    .kinetic-section {
        position: relative;
        background-color: #050505;
        color: #fff;
        height: 80vh; /* Altura fija para ser una ventana visual */
        min-height: 600px;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    /* --- FONDO E IMAGEN --- */
    .background-container {
        position: absolute;
        top: 0; left: 0; width: 100%; height: 100%;
        z-index: 0;
        overflow: hidden;
    }

    .bg-image {
        width: 100%; height: 100%;
        object-fit: cover;
        opacity: 0.8;
        transform: scale(1.1); /* Espacio para parallax */
    }

    .color-overlay {
        position: absolute;
        top: 0; left: 0; width: 100%; height: 100%;
        /* Gradiente "Club": Violeta oscuro a Azul noche */
        background: linear-gradient(45deg, rgba(20, 0, 50, 0.8), rgba(0, 20, 60, 0.6));
        mix-blend-mode: multiply;
    }

    /* --- CONTENIDO --- */
    .kinetic-wrapper {
        position: relative;
        z-index: 10;
        display: flex;
        flex-direction: column;
        gap: 0; /* Sin espacio para efecto bloque */
        width: 100%;
        transform: rotate(-3deg);
        mix-blend-mode: hard-light; /* Fusión interesante con el fondo */
    }

    .tape-row {
        width: 100%;
        overflow: hidden;
        white-space: nowrap;
        display: flex;
        padding: 10px 0;
    }

    .tape-track {
        display: flex;
        gap: 2vw;
        will-change: transform;
    }

    .word {
        font-family: var(--font-display, sans-serif);
        font-size: 14vw;
        line-height: 0.8;
        text-transform: uppercase;
        letter-spacing: -0.04em;
        font-weight: 900;
    }

    .solid {
        color: #fff;
        text-shadow: 0 0 20px rgba(255,255,255,0.3); /* Glow sutil */
    }

    .outline {
        color: transparent;
        /* COLOR DE ACENTO: Verde Ácido */
        -webkit-text-stroke: 2px #ccff00; 
        opacity: 0.9;
    }

    @media (max-width: 768px) {
        .word {
            font-size: 18vw;
            -webkit-text-stroke: 1px #ccff00;
        }
        .kinetic-section { height: 60vh; }
    }
</style>